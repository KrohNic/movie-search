{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.js","webpack:///./src/Cards.js","webpack:///./src/Fetcher.js","webpack:///./src/Key.js","webpack:///./src/Keyboard.js","webpack:///./src/KeyboardApp.js","webpack:///./src/Search.js","webpack:///./src/Slider.js","webpack:///./src/Speech.js","webpack:///./src/Utils.js","webpack:///./src/index.js","webpack:///./src/values.js"],"names":["Fetcher","require","Slider","Search","KeyboardApp","Speech","App","keyboardContainer","document","querySelector","keyboardInst","sliderInst","searchInst","speechInst","isLoading","page","searchStr","searchingEndHandler","searchCallback","dataObj","errorMsg","error","data","setData","total","fetchMovieData","loadingImg","classList","remove","nextPageCallback","concatData","searchSubmit","updateClearBtnState","module","exports","IMDB_URL","POSTER_NA","Utils","Cards","parentElem","parent","isCardContainerVisible","addEventListener","event","target","replaceCards","add","textContent","createCards","contentReplaceHandler","cardIndex","cardData","isPosterLoaded","isRatingLoaded","cardElement","first","firstCardIndex","last","getVisibleCardsCount","isCardsFullyLoaded","i","item","revealCardsContainer","id","callback","rating","createRatingElements","reveal","fetchImdbRating","imgContainer","container","img","createElem","alt","Title","src","Poster","setEmptyPoster","card","title","href","URL","imdbID","loadPoster","Year","ratingContainer","imdbId","createLoadingPlaceholder","getImdbRating","fragment","DocumentFragment","forEach","getNewCard","append","prepareData","children","length","hideOldCardsRevealNew","preparedData","concat","contentAddHandler","map","movieData","isFullyLoaded","ratingStr","values","url","responseCallback","rejectCallback","fetch","then","res","status","json","Error","mess","message","console","OMDB_API_URL","searchParams","set","OMDB_KEY","ratingCallback","Ratings","find","Source","IMDB_NAME","Value","RATING_NA","basicFetcher","str","TRANSLATIONS_URL","translationCallback","text","searchQuery","NO_SEARCH_RESULT_TEXT","totalResults","Key","value","keyCode","area","mixedKeys","button","createElement","includes","toLowerCase","e","keyDown","keyUp","selectionStart","selectionEnd","setRangeText","printText","ShiftLeft","contains","selectionDirection","setSelectionRange","fn","keyValue","keyRepeatInterval","interval","setInterval","getElementById","ShiftRight","AltLeft","AltRight","repeatKey","backspace","toggle","changeLang","toggleCase","shiftSymbols","moveCursorLeft","moveCursorRight","clearInterval","keyboardAppInst","focus","Keyboard","symbols","isEngLang","isUpperCase","isShiftPressed","cursorPosition","buttonsEn","buttonsRu","Array","from","querySelectorAll","buttonsSymbolRu","buttonsSymbolEn","window","localStorage","setItem","btn","getSymbolToSwitch","buttonsToChange","textCaseFn","toUpperCase","getEngSymbol","j","getRusSymbol","undefined","code","preventDefault","shiftKey","clearBtn","board","init","getItem","generateElements","setHandlers","wrapper","keyboard","createKeysRow","initKeySets","keyboardBtn","row","div","key","appendTo","AppInst","submitBtn","input","notification","setEventsListeners","isRuLang","test","translatedStr","loadNewCards","fetchTranslation","SLIDER_ANIM_DURATION_MS","STOCK_BEFORE_PRELOAD","appInst","cardsContainer","leftBtn","rightBtn","progressElem","cardsContainerWidth","sliderContentWidth","cardWidth","contentOffset","loadedCardsCount","totalCardsCount","dragStartX","dragLength","isMouseDown","isAnimating","cardsManager","updateSizes","updateButtonsState","updateProgress","preloadNextPage","buttonClickHandler","mouseDownHandler","x","body","mouseMoveHandler","mouseUpHandler","touches","clientX","hiddenWidth","rightHiddenWidth","cardsHiddenInRight","loadNextPage","cardsWithoutSlided","mustBeVisibleCount","someCard","getBoundingClientRect","width","sliderContent","cardsCount","fillContainerFreeSpace","setContentOffset","Math","floor","direction","animateMovingContent","left","style","removeContainerFreeSpace","hiddenCardPartWidth","round","isRightEndReached","isLeftEndReached","offset","startOffset","duration","timeStart","performance","now","move","timeNow","timePassed","stepDistance","requestAnimationFrame","cardsDisplaying","max","SPEAK_MESSAGE","app","isRecording","searchInput","defaultSearchPlaceholder","placeholder","SR","webkitSpeechRecognition","SpeechRecognition","speech","micBtn","toggleRecording","transcript","results","searchBySpeech","alert","stop","start","abort","elem","classes","child","el","classesArray","split","className","loadImg","DEFAULT_SEARCH_STR","onload"],"mappings":"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","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const Fetcher = require('./Fetcher');\nconst Slider = require('./Slider');\nconst Search = require('./Search');\nconst KeyboardApp = require('./KeyboardApp');\nconst Speech = require('./Speech');\n\nclass App {\n  constructor() {\n    this.keyboardContainer = document.querySelector('.keyboard--container');\n    this.keyboardInst = new KeyboardApp(this.keyboardContainer);\n    this.sliderInst = new Slider(this);\n    this.searchInst = new Search(this, this.sliderInst);\n    this.speechInst = new Speech(this);\n\n    this.isLoading = false;\n    this.page = 1;\n    this.searchStr = '';\n  }\n\n  loadNewCards(searchStr) {\n    if (this.isLoading || this.searchStr === searchStr) {\n      this.searchInst.searchingEndHandler();\n      return;\n    }\n\n    this.isLoading = true;\n\n    const searchCallback = (dataObj) => {\n      const errorMsg = dataObj.error || false;\n\n      if (dataObj.data) {\n        this.sliderInst.setData(dataObj.data, dataObj.total);\n        this.searchStr = searchStr;\n      }\n\n      this.searchInst.searchingEndHandler(errorMsg);\n      this.isLoading = false;\n      this.page = 1;\n    };\n\n    if (searchStr) Fetcher.fetchMovieData(searchStr, searchCallback);\n  }\n\n  loadNextPage() {\n    if (this.isLoading) return;\n\n    this.searchInst.loadingImg.classList.remove('hidden');\n    this.isLoading = true;\n    this.page += 1;\n\n    const nextPageCallback = (dataObj) => {\n      const errorMsg = dataObj.error || null;\n\n      if (dataObj.data) this.sliderInst.concatData(dataObj.data);\n\n      this.searchInst.searchingEndHandler(errorMsg);\n      this.isLoading = false;\n    };\n\n    Fetcher.fetchMovieData(this.searchStr, nextPageCallback, this.page);\n  }\n\n  searchBySpeech() {\n    this.searchInst.searchSubmit();\n    this.keyboardInst.updateClearBtnState();\n  }\n}\n\nmodule.exports = App;\n","const { IMDB_URL, POSTER_NA } = require('./values');\nconst Utils = require('./Utils');\nconst Fetcher = require('./Fetcher');\n\nclass Cards {\n  constructor(sliderInst, parentElem) {\n    this.sliderInst = sliderInst;\n    this.parent = parentElem;\n    this.data = null;\n    this.isCardContainerVisible = false;\n\n    this.parent.addEventListener('transitionend', (event) => {\n      if (event.target !== this.parent) return;\n      if (this.isCardContainerVisible) return;\n\n      this.replaceCards();\n    });\n  }\n\n  static prepareData(data) {\n    return data.map((movieData) => ({\n      data: movieData,\n      isFullyLoaded: false,\n      isRatingLoaded: false,\n      cardElement: null,\n    }));\n  }\n\n  static createRatingElements(parentElem, ratingStr) {\n    const parent = parentElem;\n\n    parent.textContent = '';\n\n    const img = Utils.createElem('img', 'rating--star', parentElem);\n    img.alt = 'rating imdb';\n    img.src = './assets/ico/star.svg';\n\n    Utils.createElem('div', 'rating--text', parentElem, ratingStr);\n  }\n\n  hideOldCardsRevealNew() {\n    this.isCardContainerVisible = false;\n    this.parent.classList.add('transparent');\n  }\n\n  revealCardsContainer() {\n    this.isCardContainerVisible = true;\n    this.parent.classList.remove('transparent');\n  }\n\n  replaceCards() {\n    this.parent.textContent = '';\n    this.createCards();\n\n    this.sliderInst.contentReplaceHandler();\n  }\n\n  reveal(cardIndex) {\n    const cardData = this.data[cardIndex];\n\n    if (!cardData.isPosterLoaded) return;\n    if (!cardData.isRatingLoaded) return;\n\n    cardData.cardElement.classList.remove('transparent');\n\n    if (this.isCardContainerVisible) return;\n\n    const first = this.sliderInst.firstCardIndex;\n    const last = first + this.sliderInst.getVisibleCardsCount();\n\n    let isCardsFullyLoaded = true;\n\n    for (let i = first; i < last; i += 1) {\n      const item = this.data[i];\n\n      if (!item) return;\n\n      if (!item.isPosterLoaded || !item.isRatingLoaded) {\n        isCardsFullyLoaded = false;\n      }\n    }\n\n    if (isCardsFullyLoaded) this.revealCardsContainer();\n  }\n\n  getImdbRating(id, parentElem, cardIndex) {\n    const callback = (rating) => {\n      Cards.createRatingElements(parentElem, rating);\n      this.data[cardIndex].isRatingLoaded = true;\n      this.reveal(cardIndex);\n    };\n\n    Fetcher.fetchImdbRating(id, callback);\n  }\n\n  setEmptyPoster(imgContainer, cardIndex) {\n    const container = imgContainer;\n\n    container.textContent = POSTER_NA;\n    this.data[cardIndex].isPosterLoaded = true;\n    this.reveal(cardIndex);\n  }\n\n  loadPoster(imgContainer, cardIndex) {\n    const { data } = this.data[cardIndex];\n    const img = Utils.createElem('img', 'card--img', imgContainer);\n\n    img.alt = data.Title;\n    img.src = data.Poster;\n\n    img.addEventListener('load', () => {\n      this.data[cardIndex].isPosterLoaded = true;\n      this.reveal(cardIndex);\n    });\n\n    img.addEventListener('error', () => {\n      this.setEmptyPoster(imgContainer, cardIndex);\n    });\n  }\n\n  getNewCard(cardIndex) {\n    const { data } = this.data[cardIndex];\n    const card = Utils.createElem('div', 'card transparent');\n\n    this.data[cardIndex].cardElement = card;\n\n    const title = Utils.createElem('a', 'card--title', card, data.Title);\n    title.title = data.Title;\n    title.href = new URL(`title/${data.imdbID}/videogallery/`, IMDB_URL);\n\n    const imgContainer = Utils.createElem('div', 'card--img_container', card);\n\n    if (data.Poster !== 'N/A') {\n      this.loadPoster(imgContainer, cardIndex);\n    } else {\n      this.setEmptyPoster(imgContainer, cardIndex);\n    }\n\n    Utils.createElem('div', 'card--year', card, data.Year);\n\n    const ratingContainer = Utils.createElem(\n      'div',\n      'card--rating',\n      card,\n      data.imdbId,\n    );\n    Utils.createLoadingPlaceholder(ratingContainer);\n\n    this.getImdbRating(data.imdbID, ratingContainer, cardIndex);\n\n    return card;\n  }\n\n  createCards() {\n    const fragment = new DocumentFragment();\n\n    this.data.forEach((cardData, cardIndex) => {\n      if (cardData.cardElement) return;\n\n      const card = this.getNewCard(cardIndex);\n      fragment.append(card);\n    });\n\n    this.parent.append(fragment);\n  }\n\n  setData(data) {\n    if (!data) return;\n\n    this.data = Cards.prepareData(data);\n\n    if (this.parent.children.length) this.hideOldCardsRevealNew();\n    else this.replaceCards();\n  }\n\n  concatData(data) {\n    if (!data) return;\n\n    const preparedData = Cards.prepareData(data);\n\n    this.data = this.data.concat(preparedData);\n    this.createCards();\n    this.sliderInst.contentAddHandler();\n  }\n}\n\nmodule.exports = Cards;\n","const values = require('./values');\n\nclass Fetcher {\n  static basicFetcher(url, responseCallback, rejectCallback) {\n    fetch(url)\n      .then((res) => {\n        if (res.status >= 200 && res.status < 300) return res.json();\n\n        throw new Error(res.status);\n      })\n      .then((json) => {\n        responseCallback(json);\n      })\n      .catch((error) => {\n        const mess = +error.message;\n\n        if (rejectCallback && mess >= 400 && mess < 600) {\n          rejectCallback(`API ${error}`);\n          // eslint-disable-next-line no-console\n        } else console.error(error);\n      });\n  }\n\n  static fetchImdbRating(id, callback) {\n    const url = new URL(values.OMDB_API_URL);\n    url.searchParams.set('i', id);\n    url.searchParams.set('apikey', values.OMDB_KEY);\n\n    const ratingCallback = (json) => {\n      const rating = json.Ratings.find(\n        (item) => item.Source === values.IMDB_NAME,\n      );\n\n      if (rating) callback(rating.Value);\n      else callback(values.RATING_NA);\n    };\n\n    Fetcher.basicFetcher(url, ratingCallback);\n  }\n\n  static fetchTranslation(str, callback) {\n    const url = new URL(values.TRANSLATIONS_URL + str);\n\n    const translationCallback = (json) => {\n      if (json.text) callback(json.text[0]);\n      else callback(str);\n    };\n\n    Fetcher.basicFetcher(url, translationCallback);\n  }\n\n  static fetchMovieData(searchQuery, callback, page = 1) {\n    const url = new URL(values.OMDB_API_URL);\n    url.searchParams.set('apikey', values.OMDB_KEY);\n    url.searchParams.set('page', page);\n    url.searchParams.set('s', searchQuery);\n    url.searchParams.set('type', 'movie');\n\n    const searchCallback = (json) => {\n      let dataObj;\n\n      if (json.Error) {\n        dataObj = { error: `${values.NO_SEARCH_RESULT_TEXT} ${searchQuery}` };\n      } else dataObj = { data: json.Search, total: json.totalResults };\n\n      callback(dataObj);\n    };\n\n    const rejectCallback = (message) => {\n      callback({ error: message });\n    };\n\n    Fetcher.basicFetcher(url, searchCallback, rejectCallback);\n  }\n}\n\nmodule.exports = Fetcher;\n","class Key {\n  constructor(keyboardInst, value, keyCode) {\n    this.keyboardInst = keyboardInst;\n    this.value = value;\n    this.keyCode = keyCode;\n    this.area = keyboardInst.area;\n    // in ru_lang they are letters, but in en_lang - symbols\n    this.mixedKeys = [\n      'Backquote',\n      'BracketLeft',\n      'BracketRight',\n      'Semicolon',\n      'Quote',\n      'Comma',\n      'Period',\n    ];\n  }\n\n  appendTo(fragment) {\n    const button = document.createElement('button');\n    button.classList.add('keyboard--button');\n\n    if (this.value) {\n      if (this.keyCode.includes('Key')) {\n        button.classList.add('letter');\n      } else if (this.mixedKeys.includes(this.keyCode)) {\n        button.classList.add('mixed');\n      } else {\n        button.classList.add('symbol');\n      }\n\n      button.append(this.value);\n    } else {\n      button.classList.add('functional');\n      button.classList.add(this.keyCode.toLowerCase());\n      button.append(this.keyCode);\n    }\n\n    button.addEventListener('mousedown', (e) => this.keyDown(e));\n    button.addEventListener('mouseup', () => this.keyUp());\n    button.addEventListener('mouseout', () => this.keyUp());\n    button.id = this.keyCode;\n    fragment.append(button);\n    return fragment;\n  }\n\n  backspace() {\n    if (this.area.selectionStart === this.area.selectionEnd) {\n      if (this.area.selectionStart <= 0) return;\n\n      this.area.setRangeText(\n        '',\n        this.area.selectionStart - 1,\n        this.area.selectionStart,\n        'end',\n      );\n    } else {\n      this.printText('');\n    }\n  }\n\n  printText(text) {\n    this.area.setRangeText(\n      text,\n      this.area.selectionStart,\n      this.area.selectionEnd,\n      'end',\n    );\n  }\n\n  moveCursorLeft(ShiftLeft) {\n    if (ShiftLeft.classList.contains('button_active')) {\n      if (\n        this.area.selectionStart !== this.area.selectionEnd\n        && this.area.selectionDirection === 'forward'\n      ) {\n        this.area.setSelectionRange(\n          this.area.selectionStart,\n          this.area.selectionEnd - 1,\n          'forward',\n        );\n      } else if (this.area.selectionStart > 0) {\n        this.area.setSelectionRange(\n          this.area.selectionStart - 1,\n          this.area.selectionEnd,\n          'backward',\n        );\n      }\n    } else if (this.area.selectionStart === 0) {\n      this.area.setSelectionRange(\n        this.area.selectionStart,\n        this.area.selectionStart,\n      );\n    } else {\n      this.area.setSelectionRange(\n        this.area.selectionStart - 1,\n        this.area.selectionStart - 1,\n      );\n    }\n  }\n\n  moveCursorRight(ShiftLeft) {\n    if (ShiftLeft.classList.contains('button_active')) {\n      if (\n        this.area.selectionStart === this.area.selectionEnd\n        || this.area.selectionDirection === 'forward'\n      ) {\n        this.area.setSelectionRange(\n          this.area.selectionStart,\n          this.area.selectionEnd + 1,\n          'forward',\n        );\n      } else {\n        this.area.setSelectionRange(\n          this.area.selectionStart + 1,\n          this.area.selectionEnd,\n          'backward',\n        );\n      }\n    } else if (this.area.value.length === this.area.selectionEnd) {\n      this.area.setSelectionRange(\n        this.area.selectionEnd,\n        this.area.selectionEnd,\n      );\n    } else {\n      this.area.setSelectionRange(\n        this.area.selectionEnd + 1,\n        this.area.selectionEnd + 1,\n      );\n    }\n  }\n\n  repeatKey(fn, keyValue) {\n    const keyRepeatInterval = 175;\n\n    fn(keyValue);\n    this.interval = setInterval(fn, keyRepeatInterval, keyValue);\n  }\n\n  keyDown(event) {\n    const ShiftLeft = document.getElementById('ShiftLeft');\n    const ShiftRight = document.getElementById('ShiftRight');\n    const AltLeft = document.getElementById('AltLeft');\n    const AltRight = document.getElementById('AltRight');\n\n    switch (event.target.id) {\n      case 'Backspace':\n        this.repeatKey(() => {\n          this.backspace();\n        });\n        break;\n      case 'Space':\n        this.printText(' ');\n        break;\n      case 'Tab':\n        this.repeatKey(() => {\n          this.printText('    ');\n        });\n        break;\n      case 'Enter':\n        break;\n      case 'ShiftLeft':\n      case 'ShiftRight':\n        ShiftLeft.classList.toggle('button_active');\n        ShiftRight.classList.toggle('button_active');\n\n        if (AltLeft.classList.contains('button_active')) {\n          ShiftLeft.classList.remove('button_active');\n          ShiftRight.classList.remove('button_active');\n          AltLeft.classList.remove('button_active');\n          AltRight.classList.remove('button_active');\n          this.keyboardInst.changeLang();\n        } else {\n          this.keyboardInst.toggleCase();\n          this.keyboardInst.shiftSymbols();\n        }\n        break;\n      case 'CapsLock':\n        this.keyboardInst.toggleCase();\n        break;\n      case 'AltLeft':\n      case 'AltRight':\n        AltLeft.classList.toggle('button_active');\n        AltRight.classList.toggle('button_active');\n\n        if (ShiftLeft.classList.contains('button_active')) {\n          ShiftLeft.classList.remove('button_active');\n          ShiftRight.classList.remove('button_active');\n          AltLeft.classList.remove('button_active');\n          AltRight.classList.remove('button_active');\n          this.keyboardInst.changeLang();\n        }\n        break;\n      case 'Lang':\n        this.keyboardInst.changeLang();\n        break;\n      case 'ArrowLeft':\n        this.repeatKey(() => {\n          this.moveCursorLeft(ShiftLeft);\n        });\n        break;\n      case 'ArrowRight':\n        this.repeatKey(() => {\n          this.moveCursorRight(ShiftLeft);\n        });\n        break;\n      default:\n        this.repeatKey((text) => {\n          this.printText(text);\n        }, event.target.textContent);\n        break;\n    }\n  }\n\n  keyUp() {\n    clearInterval(this.interval);\n    this.keyboardInst.keyboardAppInst.updateClearBtnState();\n\n    this.area.focus();\n  }\n}\n\nmodule.exports = Key;\n","class Keyboard {\n  constructor(keyboardAppInst) {\n    this.symbols = [\n      [\n        ['`~', 'Backquote'],\n        ['1!1!', 'Digit1'],\n        ['2@2\"', 'Digit2'],\n        ['3#3', 'Digit3'],\n        ['4$4;', 'Digit4'],\n        ['5%5%', 'Digit5'],\n        ['6^6:', 'Digit6'],\n        ['7&7&', 'Digit7'],\n        ['8*8*', 'Digit8'],\n        ['9(9(', 'Digit9'],\n        ['0)0)', 'Digit0'],\n        ['-_-_', 'Minus'],\n        ['=+=+', 'Equal'],\n        ['', 'Backspace'],\n      ],\n      [\n        ['', 'Tab'],\n        ['qQ', 'KeyQ'],\n        ['wW', 'KeyW'],\n        ['eE', 'KeyE'],\n        ['rR', 'KeyR'],\n        ['tT', 'KeyT'],\n        ['yY', 'KeyY'],\n        ['uU', 'KeyU'],\n        ['iI', 'KeyI'],\n        ['oO', 'KeyO'],\n        ['pP', 'KeyP'],\n        ['[{', 'BracketLeft'],\n        [']}', 'BracketRight'],\n        ['\\\\|\\\\/', 'Backslash'],\n      ],\n      [\n        ['', 'CapsLock'],\n        ['aA', 'KeyA'],\n        ['sS', 'KeyS'],\n        ['dD', 'KeyD'],\n        ['fF', 'KeyF'],\n        ['gG', 'KeyG'],\n        ['hH', 'KeyH'],\n        ['jJ', 'KeyJ'],\n        ['kK', 'KeyK'],\n        ['lL', 'KeyL'],\n        [';:', 'Semicolon'],\n        [\"'\\\"\", 'Quote'],\n        ['', 'Enter'],\n      ],\n      [\n        ['', 'ShiftLeft'],\n        ['zZ', 'KeyZ'],\n        ['xX', 'KeyX'],\n        ['cC', 'KeyC'],\n        ['vV', 'KeyV'],\n        ['bB', 'KeyB'],\n        ['nN', 'KeyN'],\n        ['mM', 'KeyM'],\n        [',<', 'Comma'],\n        ['.>', 'Period'],\n        ['/?.,', 'Slash'],\n        ['', 'ShiftRight'],\n      ],\n      [\n        ['', 'ControlLeft'],\n        ['', 'AltLeft'],\n        ['', 'Space'],\n        ['', 'AltRight'],\n        ['', 'Lang'],\n        ['', 'ArrowLeft'],\n        ['', 'ArrowRight'],\n      ],\n    ];\n\n    this.keyboardAppInst = keyboardAppInst;\n    this.area = keyboardAppInst.area;\n    this.isEngLang = true;\n    this.isUpperCase = true;\n    this.isShiftPressed = false;\n    this.cursorPosition = 0;\n\n    this.buttonsEn = null;\n    this.mixedKeys = null;\n    this.buttonsRu = null;\n  }\n\n  initKeySets() {\n    this.buttonsEn = Array.from(document.querySelectorAll('.letter'));\n    this.mixedKeys = Array.from(document.querySelectorAll('.mixed'));\n    this.buttonsSymbolRu = Array.from(document.querySelectorAll('.symbol'));\n\n    this.buttonsSymbolEn = this.buttonsSymbolRu.concat(this.mixedKeys);\n    this.buttonsRu = this.buttonsEn.concat(this.mixedKeys);\n  }\n\n  changeLang() {\n    this.isEngLang = !this.isEngLang;\n    window.localStorage.setItem('lang', this.isEngLang);\n\n    this.buttonsRu.forEach((button) => {\n      const btn = button;\n      btn.textContent = this.getSymbolToSwitch(button.id);\n    });\n  }\n\n  static toLowerCase(text) {\n    return text.toLowerCase();\n  }\n\n  static toUpperCase(text) {\n    return text.toUpperCase();\n  }\n\n  toggleCase() {\n    let buttonsToChange;\n    let textCaseFn;\n\n    this.isUpperCase = !this.isUpperCase;\n\n    if (this.isEngLang) buttonsToChange = this.buttonsEn;\n    else buttonsToChange = this.buttonsRu;\n\n    if (this.isUpperCase) textCaseFn = Keyboard.toLowerCase;\n    else textCaseFn = Keyboard.toUpperCase;\n\n    for (let i = 0; i < buttonsToChange.length; i += 1) {\n      buttonsToChange[i].textContent = textCaseFn(\n        buttonsToChange[i].textContent,\n      );\n    }\n  }\n\n  getSymbolToSwitch(id) {\n    const getEngSymbol = (i, j) => {\n      if (this.isShiftPressed) {\n        return this.symbols[i][j][0][1];\n      }\n\n      return this.symbols[i][j][0][0];\n    };\n\n    const getRusSymbol = (i, j) => {\n      if (this.isShiftPressed) {\n        return this.symbols[i][j][0][3];\n      }\n      return this.symbols[i][j][0][2];\n    };\n\n    for (let i = 0; i < this.symbols.length; i += 1) {\n      for (let j = 0; j < this.symbols[i].length; j += 1) {\n        if (this.symbols[i][j].includes(id)) {\n          if (this.isEngLang) {\n            return getEngSymbol(i, j);\n          }\n\n          return getRusSymbol(i, j);\n        }\n      }\n    }\n\n    return undefined;\n  }\n\n  shiftSymbols() {\n    let buttonsToChange;\n\n    if (this.isEngLang) buttonsToChange = this.buttonsSymbolEn;\n    else buttonsToChange = this.buttonsSymbolRu;\n\n    this.isShiftPressed = !this.isShiftPressed;\n\n    for (let i = 0; i < buttonsToChange.length; i += 1) {\n      buttonsToChange[i].textContent = this.getSymbolToSwitch(\n        buttonsToChange[i].id,\n      );\n    }\n  }\n\n  handleKeyDown(e) {\n    const button = document.getElementById(e.code);\n\n    if (button) {\n      button.classList.add('button_active');\n    } else {\n      return;\n    }\n\n    e.preventDefault();\n\n    switch (e.code) {\n      case 'ShiftLeft':\n      case 'ShiftRight':\n        this.toggleCase();\n        this.shiftSymbols();\n        break;\n      case 'Space':\n        this.cursorPosition = this.area.selectionStart;\n\n        this.area.setRangeText(\n          ' ',\n          this.cursorPosition,\n          this.cursorPosition,\n          'end',\n        );\n        break;\n      case 'Tab':\n        this.cursorPosition = this.area.selectionStart;\n\n        this.area.setRangeText(\n          '    ',\n          this.cursorPosition,\n          this.cursorPosition,\n          'end',\n        );\n        break;\n      case 'Enter':\n        break;\n      case 'Backspace':\n        this.cursorPosition = this.area.selectionStart;\n\n        if (this.cursorPosition <= 0) return;\n\n        this.area.setRangeText(\n          '',\n          this.cursorPosition - 1,\n          this.cursorPosition,\n          'end',\n        );\n        break;\n      case 'ArrowLeft':\n        this.cursorPosition = this.area.selectionStart;\n\n        if (this.cursorPosition <= 0) return;\n\n        this.area.setSelectionRange(\n          this.cursorPosition - 1,\n          this.cursorPosition - 1,\n        );\n        break;\n      case 'ArrowRight':\n        this.cursorPosition = this.area.selectionStart;\n\n        if (this.area.value.length <= this.cursorPosition) return;\n\n        this.area.setSelectionRange(\n          this.cursorPosition + 1,\n          this.cursorPosition + 1,\n        );\n        break;\n      default:\n        if (button.classList.contains('functional')) return;\n\n        this.cursorPosition = this.area.selectionStart;\n\n        this.area.setRangeText(\n          button.textContent,\n          this.cursorPosition,\n          this.cursorPosition,\n          'end',\n        );\n        break;\n    }\n  }\n\n  handleKeyUp(e) {\n    const button = document.getElementById(e.code);\n    if (button) {\n      button.classList.remove('button_active');\n    } else {\n      return;\n    }\n\n    e.preventDefault();\n\n    switch (e.code) {\n      case 'ShiftLeft':\n      case 'ShiftRight':\n        this.toggleCase();\n        this.shiftSymbols();\n        break;\n      case 'CapsLock':\n        this.toggleCase();\n        break;\n      default:\n        if (e.code.includes('Alt') && e.shiftKey) {\n          this.changeLang();\n        }\n        break;\n    }\n\n    this.area.focus();\n  }\n}\n\nmodule.exports = Keyboard;\n","const Keyboard = require(\"./Keyboard\");\nconst Key = require(\"./Key\");\n\nclass KeyboardApp {\n  constructor(parentElem) {\n    this.parentElem = parentElem;\n    this.clearBtn = document.querySelector(\".search--clear_button\");\n    this.area = document.querySelector(\".search--input\");\n    this.board = new Keyboard(this);\n\n    this.init();\n  }\n\n  init() {\n    if (window.localStorage.getItem(\"lang\")) {\n      this.board.isEngLang = window.localStorage.getItem(\"lang\") === \"true\";\n    }\n\n    this.generateElements(this.parentElem);\n    this.setHandlers();\n  }\n\n  generateElements(wrapper) {\n    const keyboard = document.createElement(\"div\");\n    keyboard.classList.add(\"keyboard\");\n    keyboard.id = \"keyboard\";\n    wrapper.append(keyboard);\n\n    for (let i = 0; i < this.board.symbols.length; i += 1) {\n      this.createKeysRow(this.board.symbols[i], keyboard);\n    }\n\n    this.board.initKeySets();\n  }\n\n  setHandlers() {\n    const keyboardBtn = document.querySelector(\".search--keyboard_button\");\n    keyboardBtn.addEventListener(\"click\", () => {\n      this.parentElem.classList.toggle(\"keyboard--container-hidden\");\n    });\n\n    this.clearBtn.addEventListener(\"click\", () => {\n      this.area.value = \"\";\n      this.clearBtn.classList.add(\"hidden\");\n      this.area.focus();\n    });\n  }\n\n  updateClearBtnState() {\n    if (this.area.value.length) this.clearBtn.classList.remove(\"hidden\");\n    else this.clearBtn.classList.add(\"hidden\");\n  }\n\n  createKeysRow(row, keyboard) {\n    const div = document.createElement(\"div\");\n    div.classList.add(\"key-row\");\n    keyboard.append(div);\n\n    let fragment = new DocumentFragment();\n\n    for (let i = 0; i < row.length; i += 1) {\n      let key;\n\n      if (this.board.isEngLang) {\n        key = new Key(this.board, row[i][0][0], row[i][1]);\n      } else {\n        key = new Key(this.board, row[i][0][2], row[i][1]);\n      }\n\n      fragment = key.appendTo(fragment);\n    }\n\n    div.append(fragment);\n  }\n}\n\nmodule.exports = KeyboardApp;\n","const Fetcher = require('./Fetcher');\n\nclass Search {\n  constructor(AppInst, sliderInst) {\n    this.AppInst = AppInst;\n    this.sliderInst = sliderInst;\n    this.submitBtn = document.querySelector('.search--submit_button');\n    this.input = document.querySelector('.search--input');\n    this.notification = document.querySelector('.notification');\n    this.loadingImg = document.querySelector('.search--loading');\n    this.setEventsListeners();\n  }\n\n  setEventsListeners() {\n    this.submitBtn.addEventListener('click', () => {\n      this.searchSubmit();\n    });\n\n    document.querySelector('#Enter').addEventListener('click', () => {\n      this.searchSubmit();\n    });\n\n    this.input.addEventListener('keyup', (e) => {\n      if (e.key === 'Enter') this.searchSubmit();\n    });\n  }\n\n  searchingEndHandler(notification) {\n    this.loadingImg.classList.add('hidden');\n\n    if (notification) this.notification.textContent = notification;\n  }\n\n  searchSubmit() {\n    const searchStr = this.input.value;\n\n    this.notification.textContent = '';\n\n    if (!searchStr) return;\n\n    this.loadingImg.classList.remove('hidden');\n\n    const isRuLang = /[-]/i.test(searchStr);\n\n    if (isRuLang) {\n      const translationCallback = (translatedStr) => {\n        this.AppInst.loadNewCards(translatedStr);\n        this.notification.textContent = `Showing results for \"${translatedStr}\"`;\n      };\n\n      Fetcher.fetchTranslation(searchStr, translationCallback);\n    } else {\n      this.AppInst.loadNewCards(searchStr);\n    }\n  }\n}\n\nmodule.exports = Search;\n","const { SLIDER_ANIM_DURATION_MS, STOCK_BEFORE_PRELOAD } = require('./values');\nconst Cards = require('./Cards');\n\nclass Slider {\n  constructor(appInst) {\n    this.appInst = appInst;\n    this.cardsContainer = document.querySelector('.cards_container');\n    this.leftBtn = document.querySelector('.slider--left');\n    this.rightBtn = document.querySelector('.slider--right');\n    this.progressElem = document.querySelector('.slider--progress');\n\n    this.cardsContainerWidth = -1;\n    this.sliderContentWidth = -1;\n    this.cardWidth = -1;\n    this.contentOffset = 0;\n    this.firstCardIndex = 0;\n    this.loadedCardsCount = 0;\n    this.totalCardsCount = 0;\n    this.dragStartX = 0;\n    this.dragLength = 0;\n    this.isMouseDown = false;\n    this.isAnimating = false;\n\n    this.cardsManager = new Cards(this, this.cardsContainer);\n    this.setEventsListeners();\n  }\n\n  setEventsListeners() {\n    window.addEventListener('resize', () => {\n      this.updateSizes();\n      this.updateButtonsState();\n      this.updateProgress();\n      this.preloadNextPage();\n    });\n\n    this.leftBtn.addEventListener('click', () => {\n      this.buttonClickHandler(-1);\n    });\n\n    this.rightBtn.addEventListener('click', () => {\n      this.buttonClickHandler(1);\n    });\n\n    this.cardsContainer.addEventListener('mousedown', (e) => {\n      this.mouseDownHandler(e.x);\n    });\n\n    document.body.addEventListener('mousemove', (e) => {\n      this.mouseMoveHandler(e.x);\n    });\n\n    document.body.addEventListener('mouseup', () => {\n      this.mouseUpHandler();\n    });\n\n    document.body.addEventListener('mouseleave', () => {\n      this.mouseUpHandler();\n    });\n\n    this.cardsContainer.addEventListener('touchstart', (e) => {\n      if (e.touches.length === 1) this.mouseDownHandler(e.touches[0].clientX);\n    });\n\n    document.body.addEventListener('touchmove', (e) => {\n      if (e.touches.length === 1) this.mouseMoveHandler(e.touches[0].clientX);\n    });\n\n    document.body.addEventListener('touchend', () => {\n      this.mouseUpHandler();\n    });\n\n    document.body.addEventListener('touchcancel', () => {\n      this.mouseUpHandler();\n    });\n  }\n\n  preloadNextPage() {\n    if (this.loadedCardsCount >= this.totalCardsCount) return;\n\n    const hiddenWidth = this.cardsContainerWidth - this.sliderContentWidth;\n    const rightHiddenWidth = hiddenWidth - this.contentOffset;\n    const cardsHiddenInRight = rightHiddenWidth / this.cardWidth;\n\n    if (cardsHiddenInRight > STOCK_BEFORE_PRELOAD) return;\n\n    this.appInst.loadNextPage();\n  }\n\n  fillContainerFreeSpace() {\n    if (this.sliderContentWidth >= this.cardsContainerWidth) {\n      this.firstCardIndex = 0;\n    } else if (this.firstCardIndex > 0) {\n      const cardsWithoutSlided = this.loadedCardsCount - this.firstCardIndex;\n      const mustBeVisibleCount = this.getVisibleCardsCount();\n\n      if (cardsWithoutSlided < mustBeVisibleCount) {\n        this.firstCardIndex -= 1;\n      }\n    }\n  }\n\n  updateSizes() {\n    const someCard = document.querySelector('.card');\n\n    if (someCard) this.cardWidth = someCard.getBoundingClientRect().width;\n    else this.cardWidth = 0;\n\n    const sliderContent = document.querySelector('.slider--content');\n    this.sliderContentWidth = sliderContent.getBoundingClientRect().width;\n\n    const cardsCount = this.cardsContainer.children.length;\n    this.cardsContainerWidth = this.cardWidth * cardsCount;\n\n    this.fillContainerFreeSpace();\n\n    this.setContentOffset(this.firstCardIndex * this.cardWidth);\n  }\n\n  getVisibleCardsCount() {\n    if (this.sliderContentWidth < this.cardsContainerWidth) {\n      return Math.floor(this.sliderContentWidth / this.cardWidth);\n    }\n\n    return this.cardsContainerWidth / this.cardWidth;\n  }\n\n  contentReplaceHandler() {\n    this.firstCardIndex = 0;\n    this.updateSizes();\n    this.updateButtonsState();\n    this.updateProgress();\n  }\n\n  buttonClickHandler(direction) {\n    if (this.isAnimating) return;\n\n    this.firstCardIndex += direction;\n    this.animateMovingContent(direction * this.cardWidth);\n  }\n\n  mouseDownHandler(clientX) {\n    if (this.isAnimating) return;\n\n    this.isMouseDown = true;\n    this.dragStartX = clientX + this.contentOffset;\n    this.dragLength = 0;\n  }\n\n  mouseMoveHandler(clientX) {\n    if (!this.isMouseDown) return;\n\n    const left = clientX - this.dragStartX;\n    const hiddenWidth = this.cardsContainerWidth - this.sliderContentWidth;\n\n    if (left > 0 || -left > hiddenWidth) return;\n\n    this.contentOffset = -left;\n    this.cardsContainer.style.left = `${left}px`;\n  }\n\n  mouseUpHandler() {\n    if (!this.isMouseDown) return;\n\n    this.isMouseDown = false;\n\n    this.removeContainerFreeSpace();\n  }\n\n  removeContainerFreeSpace() {\n    const hiddenCardPartWidth = this.contentOffset % this.cardWidth;\n    this.firstCardIndex = Math.round(this.contentOffset / this.cardWidth);\n\n    if (hiddenCardPartWidth >= this.cardWidth / 2) {\n      this.animateMovingContent(this.cardWidth - hiddenCardPartWidth);\n    } else if (hiddenCardPartWidth) {\n      this.animateMovingContent(-hiddenCardPartWidth);\n    } else {\n      this.updateButtonsState();\n      this.updateProgress();\n      this.preloadNextPage();\n    }\n  }\n\n  updateButtonsState() {\n    const hiddenWidth = this.cardsContainerWidth - this.sliderContentWidth;\n    const isRightEndReached = this.contentOffset >= hiddenWidth;\n    const isLeftEndReached = this.contentOffset === 0;\n\n    if (isRightEndReached) {\n      this.rightBtn.classList.add('hidden');\n    } else {\n      this.rightBtn.classList.remove('hidden');\n    }\n\n    if (isLeftEndReached) {\n      this.leftBtn.classList.add('hidden');\n    } else {\n      this.leftBtn.classList.remove('hidden');\n    }\n  }\n\n  setContentOffset(offset) {\n    this.contentOffset = offset;\n    this.cardsContainer.style.left = `${-this.contentOffset}px`;\n  }\n\n  animateMovingContent(offset) {\n    const startOffset = this.contentOffset;\n    const duration = SLIDER_ANIM_DURATION_MS;\n    const timeStart = performance.now();\n\n    const move = (timeNow) => {\n      const timePassed = timeNow - timeStart;\n\n      if (timePassed < duration) {\n        const stepDistance = offset * (timePassed / duration);\n\n        this.setContentOffset(startOffset + stepDistance);\n\n        requestAnimationFrame(move);\n      } else {\n        this.setContentOffset(startOffset + offset);\n        this.updateButtonsState();\n        this.updateProgress();\n        this.preloadNextPage();\n\n        this.isAnimating = false;\n      }\n    };\n\n    this.isAnimating = true;\n    requestAnimationFrame(move);\n  }\n\n  updateProgress() {\n    const cardsDisplaying = Math.round(\n      this.sliderContentWidth / this.cardWidth,\n    );\n    this.progressElem.value = this.firstCardIndex + cardsDisplaying;\n  }\n\n  contentAddHandler() {\n    const cardsCount = this.cardsContainer.children.length;\n    this.cardsContainerWidth = this.cardWidth * cardsCount;\n    this.updateButtonsState();\n  }\n\n  setData(data, total) {\n    this.loadedCardsCount = data.length;\n    this.totalCardsCount = total;\n    this.progressElem.max = total;\n\n    this.cardsManager.setData(data);\n  }\n\n  concatData(data) {\n    this.loadedCardsCount += data.length;\n\n    this.cardsManager.concatData(data);\n  }\n}\n\nmodule.exports = Slider;\n","const { SPEAK_MESSAGE } = require('./values');\n\nclass Speech {\n  constructor(appInst) {\n    this.app = appInst;\n    this.isRecording = false;\n\n    this.searchInput = document.querySelector('.search--input');\n    this.defaultSearchPlaceholder = this.searchInput.placeholder;\n\n    const SR = window.webkitSpeechRecognition || window.SpeechRecognition;\n    this.speech = new SR();\n\n    this.setEventsListeners();\n  }\n\n  setEventsListeners() {\n    const micBtn = document.querySelector('.search--mic_button');\n\n    micBtn.addEventListener('click', () => {\n      this.toggleRecording();\n    });\n\n    this.speech.addEventListener('end', () => {\n      this.toggleRecording();\n    });\n\n    this.speech.addEventListener('result', (e) => {\n      const { transcript } = e.results[0][0];\n\n      this.searchInput.value = transcript;\n      this.app.searchBySpeech(transcript);\n    });\n\n    this.speech.addEventListener('error', (e) => {\n      if (e.error === 'not-allowed') {\n        // eslint-disable-next-line no-alert\n        window.alert('Speech recording is not allowed');\n      }\n    });\n  }\n\n  toggleRecording() {\n    if (this.isRecording) {\n      this.searchInput.placeholder = this.defaultSearchPlaceholder;\n      this.stop();\n    } else {\n      this.searchInput.placeholder = SPEAK_MESSAGE;\n      this.start();\n    }\n  }\n\n  start() {\n    this.isRecording = true;\n    this.speech.start();\n  }\n\n  stop() {\n    this.isRecording = false;\n    this.speech.abort();\n  }\n}\n\nmodule.exports = Speech;\n","class Utils {\n  static createElem(elem, classes, parent, child) {\n    const el = document.createElement(elem);\n\n    if (classes instanceof Array) el.classList.add(...classes);\n    else if (typeof classes === 'string') {\n      const classesArray = classes.split(' ');\n\n      classesArray.forEach((className) => {\n        el.classList.add(className);\n      });\n    }\n\n    if (child instanceof Array) el.append(...child);\n    else if (child) el.append(child);\n\n    if (parent) parent.append(el);\n\n    return el;\n  }\n\n  static createLoadingPlaceholder(parent) {\n    const loadImg = Utils.createElem('img', 'load_img', parent);\n    loadImg.alt = 'loading...';\n    loadImg.title = 'loading...';\n    loadImg.src = './assets/ico/load.gif';\n    parent.append(loadImg);\n  }\n}\n\nmodule.exports = Utils;\n","const App = require('./App');\nconst { DEFAULT_SEARCH_STR } = require('./values');\n\ndocument.body.onload = () => {\n  const app = new App();\n  app.loadNewCards(DEFAULT_SEARCH_STR);\n\n  // eslint-disable-next-line no-alert\n  // window.alert(\n  //   '.  -   (    '\n  //     + ')\\n       '\n  //     + '  -       \\n'\n  //     + '   - mikolka.del@gmail.com',\n  // );\n};\n","const OMDB_API_URL = 'https://www.omdbapi.com';\nconst OMDB_KEY = '61cb7268';\nconst TRANSLATIONS_URL = 'https://translate.yandex.net/'\n  + 'api/v1.5/tr.json/translate?key='\n  + 'trnsl.1.1.20200424T165651Z.1d0b4512feaec8b5.d0f1a9a6e52374'\n  + 'b31845deff980acf39a41c1b1e&lang=ru-en&text=';\nconst IMDB_URL = 'https://www.imdb.com/';\nconst IMDB_NAME = 'Internet Movie Database';\nconst NO_SEARCH_RESULT_TEXT = 'No result for';\nconst POSTER_NA = 'Poster not found';\nconst RATING_NA = 'Rating not found';\nconst DEFAULT_SEARCH_STR = 'dream';\nconst SLIDER_ANIM_DURATION_MS = 200;\nconst STOCK_BEFORE_PRELOAD = 4;\nconst SPEAK_MESSAGE = ' - - - SPEAK - - -';\n\nmodule.exports = {\n  OMDB_API_URL,\n  OMDB_KEY,\n  TRANSLATIONS_URL,\n  IMDB_URL,\n  IMDB_NAME,\n  NO_SEARCH_RESULT_TEXT,\n  POSTER_NA,\n  RATING_NA,\n  DEFAULT_SEARCH_STR,\n  SLIDER_ANIM_DURATION_MS,\n  STOCK_BEFORE_PRELOAD,\n  SPEAK_MESSAGE,\n};\n"],"sourceRoot":""}